# Домашнее задание

## Список объектов

* ow_accounts.sql - скрипт создания таблицы, описывающая счета
* ow_turnovers.sql - скрипт создания таблицы, описывающей обороты по счетам
* test_fill.sql - скрипт заполнения таблиц тестовыми данными
* install.sql - скрипт запуска установки объектов
* tasks.sql - файл с запросами по заданию
* get_prc_summ.sql - скрипт создания функции из задания

## Установка

Установка выполняется командой:
`sqlplus < схема >/< пароль >@< SID > @install.sql`, где:
* **< схема >** - название схемы, в которую происходит установка
* **< пароль >** - пароль схемы
* **< SID >** - SID БД

Пример: `sqlplus apps/apps@DVLP_R12 @install.sql`

После установки будет создан файл OW_INSTALL.log с информацией об установке

## Текст задания

Спроектируйте структуру таблиц для ведения информации о счетах, движениях по счетам и остатках.
По сформированной структуре напишите запросы чтобы получить:
* текущий остаток по счету
* остаток по счету на произвольную дату
* дебетовый (расходный) и кредитовый (приходный) оборот по счету за произвольный период, то есть сумму списаний и поступлений на счет

Напишите функцию для расчета процентов по остаткам на счете.
* Параметры функции: Счет, Дата начала периода, Дата окончания периода, Процентная ставка.
* Результат функции: сумма процентов
* Базовая формула для расчета процентов за период: СуммаПроцентов =  ОстатокНаСчете * ПроцентнаяСтавка * ДнейВПериоде / КоличествоДнейВГоду

Формула используется для периодов, в которых остаток на счете не менялся. Если в расчетном периоде остаток менялся, то период делится на части и проценты по ним складываются.

В качестве остатка для расчета процентов используется входящий остаток по счету на начало дня. То есть если в течение дня остаток по счету менялся, то для расчета процентов за этот день используется остаток, который был на счете до сегодняшних движений.
